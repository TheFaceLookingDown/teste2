<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Secret Unlock with Audio</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#000000;
    --fg:#ffffff;
    --muted: #aaaaaa;
    --accent:#ffffff;
    --maxw:880px;
  }
  html,body{height:100%;}
  body{
    margin:0;padding:24px;box-sizing:border-box;
    background:var(--bg);
    color:var(--fg);
    font-family:"Press Start 2P", monospace;
  }
  .wrap{max-width:var(--maxw);margin:0 auto}
  h1{font-size:18px;margin:0 0 12px 0;color:var(--accent)}
  .row{display:flex;gap:12px;align-items:center}
  input[type="password"]{background:#060606;border:1px solid #333;color:var(--fg);padding:10px;font-family:inherit;font-size:12px}
  button{background:#333; color:#fff;border:none;padding:10px 12px;font-family:inherit;cursor:pointer}
  .reveal{margin-top:18px;padding:14px;border:1px dashed #555;display:none;background:rgba(0,0,0,0.4)}
  .reveal img{max-width:100%;display:block;margin:8px 0}
  .notice{font-size:11px;color:#999;margin-top:6px}
  footer{margin-top:18px;font-size:10px;color:var(--muted)}
</style>
</head>
<body>
  <div class="wrap">
    <h1>SECRET UNLOCK — with Audio</h1>

    <label for="password">Enter password to unlock</label>
    <div class="row" style="margin-top:6px">
      <input id="password" type="password" placeholder="type password here" />
      <button id="submit">Unlock</button>
    </div>

    <div id="reveal" class="reveal" aria-hidden="true">
      <h2 id="r-title"></h2>
      <img id="r-img" alt="reveal image">
      <div id="r-text"></div>
      <audio id="r-audio" controls></audio>
    </div>

    <div id="msg" class="notice" aria-live="polite"></div>

    <footer>Tip: host this file on GitHub Pages or any static host. Only people with the code can change the content.</footer>
  </div>

<script>
/* ----------------- CONFIG ----------------- */
const SECRET = 'secret.txt';
const DEFAULT_EDITOR_JSON = {
  title: "title.txt",
  text: "text.txt",
  img: "zero.jpg",
  audio: "one.mp3"
};
/* ----------------------------------------- */

function applyContent() {
  document.getElementById('r-title').textContent = DEFAULT_EDITOR_JSON.title;
  document.getElementById('r-text').textContent = DEFAULT_EDITOR_JSON.text;
  const rimg = document.getElementById('r-img');
  rimg.src = DEFAULT_EDITOR_JSON.img;
  rimg.alt = DEFAULT_EDITOR_JSON.title || 'reveal image';
  
  const raudio = document.getElementById('r-audio');
  raudio.src = DEFAULT_EDITOR_JSON.audio;
  raudio.autoplay = false; // só toca quando o usuário clicar play
}

function setMsg(text, isError){
  const el = document.getElementById('msg');
  el.textContent = text;
  el.style.color = isError ? '#ff6666' : '#ffffff';
}

function tryUnlock() {
  const attempt = document.getElementById('password').value || '';
  if (attempt === SECRET) {
    document.getElementById('reveal').style.display = 'block';
    document.getElementById('reveal').setAttribute('aria-hidden','false');
    setMsg('Unlocked. Content revealed below.', false);
  } else {
    setMsg('Wrong password.', true);
    const btn = document.getElementById('submit');
    btn.style.transform = 'translateX(-6px)';
    setTimeout(()=>btn.style.transform='translateX(0)',120);
  }
}

document.getElementById('submit').addEventListener('click', tryUnlock);
document.getElementById('password').addEventListener('keydown',(e)=>{if(e.key==='Enter') tryUnlock();});

applyContent();
</script>
</body>
</html>
